<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Qu·∫£n l√Ω ƒë·ªó xe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    * {
      box-sizing: border-box;
    }
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 0;
      background: #f5f5f5;
    }
    header {
      background: #1e88e5;
      color: white;
      padding: 12px 16px;
      text-align: center;
      font-size: 18px;
      font-weight: 600;
    }
    .container {
      padding: 12px;
      max-width: 700px;
      margin: 0 auto;
    }

    .section-title {
      font-size: 15px;
      font-weight: 600;
      margin: 10px 0 6px;
    }

    .form {
      background: #ffffff;
      border-radius: 10px;
      padding: 10px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 12px;
    }

    .form-row {
      display: flex;
      gap: 8px;
    }

    .form-row > * {
      flex: 1;
    }

    .datetime-group {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .datetime-input {
      flex: 1;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .btn-now {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      background: #43a047;
      color: white;
      font-size: 13px;
      cursor: pointer;
      white-space: nowrap;
    }

    .btn-now:hover {
      background: #388e3c;
    }

    input[type="text"],
    select {
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      width: 100%;
      background: white;
    }

    select {
      cursor: pointer;
    }

    select:focus,
    input[type="text"]:focus {
      outline: none;
      border-color: #1e88e5;
      box-shadow: 0 0 0 3px rgba(30, 136, 229, 0.1);
    }

    button {
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary {
      background: #1e88e5;
      color: white;
      width: 100%;
    }

    .btn-primary:hover {
      background: #1976d2;
    }

    .top-bar {
      display: flex;
      gap: 8px;
      margin: 8px 0 10px;
    }

    #searchInput {
      flex: 1;
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    /* ---- SWIPE CARD ---- */
    .record {
      position: relative;
      margin-bottom: 8px;
      border-radius: 10px;
      overflow: hidden;
    }

    .record-content {
      background: white;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      transition: transform 0.2s ease;
    }

    .swipe-actions {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: stretch;
    }

    .swipe-btn {
      width: 70px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: white;
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      font-size: 14px;
    }

    .swipe-edit {
      background: #9e9e9e;
    }

    .swipe-delete {
      background: #ef5350;
    }

    .record-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 10px;
    }
    .record-number {
      display: inline-block;
      background: #1e88e5;
      color: white;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
    }
    .record-plate {
      font-size: 18px;
      font-weight: 700;
      color: #1e88e5;
      margin: 6px 0;
    }
    .record-details {
      display: grid;
      grid-template-columns: auto 1fr;
      gap: 8px;
      margin-top: 8px;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 8px;
    }
    .record-label {
      font-size: 13px;
      color: #666;
      font-weight: 500;
    }
    .record-value {
      font-size: 13px;
      color: #333;
    }
    .record-location {
      font-size: 15px;
      font-weight: 600;
      color: #333;
      margin: 6px 0;
    }
    .record-note {
      font-size: 12px;
      color: #666;
      margin-top: 8px;
      padding: 8px;
      background: #fff3cd;
      border-radius: 6px;
      border-left: 3px solid #ffc107;
    }

    .empty-text {
      text-align: center;
      color: #777;
      font-size: 14px;
      margin-top: 24px;
    }

    @media (max-width: 480px) {
      .form-row {
        flex-direction: column;
      }
      .record-details {
        grid-template-columns: auto 1fr;
      }
    }
  </style>
</head>
<body>
  <header>Qu·∫£n l√Ω ƒë·ªó xe</header>
  <div class="container">

    <div class="section-title">Th√™m l·∫ßn ƒë·ªó xe</div>
    <div class="form">
      <div class="form-row">
        <div class="datetime-group">
          <input id="dateInput" class="datetime-input" type="text" placeholder="dd/mm/yyyy hh:mm" />
          <button class="btn-now" onclick="setNow()">B√¢y gi·ªù</button>
        </div>
      </div>

      <!-- Bi·ªÉn s·ªë: dropdown + input custom -->
      <div class="form-row">
        <select id="plateInput">
          <option value="">-- Ch·ªçn bi·ªÉn s·ªë --</option>
          <option value="other">üìù Th√™m bi·ªÉn s·ªë m·ªõi...</option>
        </select>
        <input id="plateInputCustom" type="text"
               placeholder="Nh·∫≠p bi·ªÉn s·ªë m·ªõi (VD: 30A-12345)"
               style="display: none;"
               maxlength="15" />
      </div>

      <div class="form-row">
        <select id="buildingInput">
          <option value="">-- Ch·ªçn ƒë·ªãa ƒëi·ªÉm --</option>
          <option value="other">üìù Th√™m ƒë·ªãa ƒëi·ªÉm m·ªõi...</option>
        </select>
        <input id="buildingInputCustom" type="text" placeholder="Nh·∫≠p ƒë·ªãa ƒëi·ªÉm m·ªõi" style="display: none;" />
      </div>
      <div class="form-row">
        <input id="floorInput" type="text" placeholder="H·∫ßm/T·∫ßng (VD: B2, T·∫ßng 3)" />
        <input id="spotInput" type="text" placeholder="√î tr·ªëng (tu·ª≥ ch·ªçn)" />
      </div>
      <div class="form-row">
        <input id="noteInput" type="text" placeholder="Ghi ch√∫ (tu·ª≥ ch·ªçn)" />
      </div>
      <button class="btn-primary" onclick="addRecord()">L∆∞u l·∫ßn ƒë·ªó</button>
    </div>

    <div class="section-title">Danh s√°ch ( #1 l√† l·∫ßn ƒë·ªó g·∫ßn nh·∫•t )</div>
    <div class="top-bar">
      <input id="searchInput" type="text" placeholder="T√¨m theo bi·ªÉn s·ªë / h·∫ßm / √¥ tr·ªëng / ƒë·ªãa ƒëi·ªÉm..." />
    </div>

    <div id="recordsContainer"></div>
    <p class="empty-text" id="emptyText" style="display: none;">
      Ch∆∞a c√≥ l·∫ßn ƒë·ªó n√†o. H√£y th√™m ·ªü ph·∫ßn tr√™n.
    </p>
  </div>

  <script>
    const STORAGE_KEY = "parking_records_v3";
    const LOCATIONS_KEY = "parking_locations_v1";
    const PLATES_KEY = "parking_plates_v1";

    let records = [];
    let customLocations = [];
    let customPlates = [];

    // Format ng√†y gi·ªù theo ƒë·ªãnh d·∫°ng dd/mm/yyyy hh:mm
    function formatDateTime(date) {
      const d = String(date.getDate()).padStart(2, "0");
      const m = String(date.getMonth() + 1).padStart(2, "0");
      const y = date.getFullYear();
      const h = String(date.getHours()).padStart(2, "0");
      const min = String(date.getMinutes()).padStart(2, "0");
      return `${d}/${m}/${y} ${h}:${min}`;
    }

    // Parse chu·ªói dd/mm/yyyy hh:mm th√†nh Date object
    function parseDateTime(str) {
      const parts = str.trim().split(" ");
      if (parts.length !== 2) return null;
      
      const dateParts = parts[0].split("/");
      const timeParts = parts[1].split(":");
      
      if (dateParts.length !== 3 || timeParts.length !== 2) return null;
      
      const day = parseInt(dateParts[0]);
      const month = parseInt(dateParts[1]) - 1;
      const year = parseInt(dateParts[2]);
      const hour = parseInt(timeParts[0]);
      const minute = parseInt(timeParts[1]);
      
      const date = new Date(year, month, day, hour, minute);
      
      if (isNaN(date.getTime())) return null;
      return date;
    }

    // ƒê·∫∑t th·ªùi gian hi·ªán t·∫°i
    function setNow() {
      document.getElementById("dateInput").value = formatDateTime(new Date());
    }

    // Load records t·ª´ storage
    function loadRecords() {
      const saved = localStorage.getItem(STORAGE_KEY);
      records = saved ? JSON.parse(saved) : [];
      
      const savedLocations = localStorage.getItem(LOCATIONS_KEY);
      customLocations = savedLocations ? JSON.parse(savedLocations) : [];
      
      const savedPlates = localStorage.getItem(PLATES_KEY);
      customPlates = savedPlates ? JSON.parse(savedPlates) : [];

      updateLocationDropdown();
      updatePlateDropdown();
      setNow();
      renderRecords();
    }

    // L∆∞u records v√†o storage
    function saveRecords() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(records));
    }

    // L∆∞u custom locations
    function saveLocations() {
      localStorage.setItem(LOCATIONS_KEY, JSON.stringify(customLocations));
    }

    // L∆∞u custom plates
    function savePlates() {
      localStorage.setItem(PLATES_KEY, JSON.stringify(customPlates));
    }

    // C·∫≠p nh·∫≠t dropdown ƒë·ªãa ƒëi·ªÉm
    function updateLocationDropdown() {
      const select = document.getElementById("buildingInput");
      if (!select) return;

      // X√≥a c√°c options custom c≈©
      select.querySelectorAll("option[data-custom]").forEach(opt => opt.remove());
      
      // Th√™m custom locations v√†o tr∆∞·ªõc option "other"
      const otherOption = select.querySelector("option[value='other']");
      customLocations.forEach(loc => {
        const option = document.createElement("option");
        option.value = loc;
        option.textContent = loc;
        option.setAttribute("data-custom", "true");
        select.insertBefore(option, otherOption);
      });
    }

    // C·∫≠p nh·∫≠t dropdown bi·ªÉn s·ªë
    function updatePlateDropdown() {
      const select = document.getElementById("plateInput");
      if (!select) return;

      // X√≥a c√°c options custom c≈©
      select.querySelectorAll("option[data-custom]").forEach(opt => opt.remove());

      // Th√™m custom plates v√†o tr∆∞·ªõc option "other"
      const otherOption = select.querySelector("option[value='other']");
      customPlates.forEach(p => {
        const option = document.createElement("option");
        option.value = p;
        option.textContent = p;
        option.setAttribute("data-custom", "true");
        select.insertBefore(option, otherOption);
      });
    }

    // Th√™m record m·ªõi
    function addRecord() {
      const dateInput = document.getElementById("dateInput");
      const plateSelect = document.getElementById("plateInput");
      const plateCustomInput = document.getElementById("plateInputCustom");
      const buildingSelect = document.getElementById("buildingInput");
      const buildingCustomInput = document.getElementById("buildingInputCustom");
      const floorInput = document.getElementById("floorInput");
      const spotInput = document.getElementById("spotInput");
      const noteInput = document.getElementById("noteInput");

      const dateTimeStr = dateInput.value.trim();
      let plate = plateSelect.value;
      let building = buildingSelect.value;
      
      // N·∫øu ch·ªçn "other", l·∫•y gi√° tr·ªã t·ª´ input custom - bi·ªÉn s·ªë
      if (plate === "other") {
        plate = plateCustomInput.value.trim();
        if (!plate) {
          alert("Vui l√≤ng nh·∫≠p bi·ªÉn s·ªë xe.");
          return;
        }
        // L∆∞u bi·ªÉn s·ªë m·ªõi v√†o danh s√°ch
        if (!customPlates.includes(plate)) {
          customPlates.push(plate);
          savePlates();
          updatePlateDropdown();
        }
      }

      // N·∫øu ch·ªçn "other", l·∫•y gi√° tr·ªã t·ª´ input custom - ƒë·ªãa ƒëi·ªÉm
      if (building === "other") {
        building = buildingCustomInput.value.trim();
        if (!building) {
          alert("Vui l√≤ng nh·∫≠p ƒë·ªãa ƒëi·ªÉm.");
          return;
        }
        // L∆∞u ƒë·ªãa ƒëi·ªÉm m·ªõi v√†o danh s√°ch
        if (!customLocations.includes(building)) {
          customLocations.push(building);
          saveLocations();
          updateLocationDropdown();
        }
      }
      
      const floor = floorInput.value.trim();
      const spot = spotInput.value.trim();
      const note = noteInput.value.trim();

      if (!dateTimeStr) {
        alert("Vui l√≤ng nh·∫≠p ng√†y gi·ªù ho·∫∑c nh·∫•n 'B√¢y gi·ªù'.");
        return;
      }

      const dateObj = parseDateTime(dateTimeStr);
      if (!dateObj) {
        alert("ƒê·ªãnh d·∫°ng ng√†y gi·ªù kh√¥ng h·ª£p l·ªá. Vui l√≤ng nh·∫≠p theo ƒë·ªãnh d·∫°ng: dd/mm/yyyy hh:mm");
        return;
      }

      if (!plate) {
        alert("Vui l√≤ng nh·∫≠p ho·∫∑c ch·ªçn bi·ªÉn s·ªë xe.");
        return;
      }
      if (!building) {
        alert("Vui l√≤ng ch·ªçn ƒë·ªãa ƒëi·ªÉm.");
        return;
      }
      if (!floor) {
        alert("Vui l√≤ng nh·∫≠p h·∫ßm/t·∫ßng.");
        return;
      }

      records.unshift({
        id: Date.now(),
        datetime: dateTimeStr,
        timestamp: dateObj.getTime(),
        plate,
        building,
        floor,
        spot,
        note
      });

      saveRecords();
      renderRecords();

      // Reset form
      plateSelect.value = "";
      plateCustomInput.value = "";
      plateCustomInput.style.display = "none";

      buildingSelect.value = "";
      buildingCustomInput.value = "";
      buildingCustomInput.style.display = "none";

      floorInput.value = "";
      spotInput.value = "";
      noteInput.value = "";
      setNow();
    }

    // S·ª≠a record
    function editRecord(id) {
      const record = records.find(r => r.id === id);
      if (!record) return;

      const newDateTime = prompt("Ng√†y gi·ªù (dd/mm/yyyy hh:mm):", record.datetime);
      if (newDateTime === null) return;

      const newPlate = prompt("Bi·ªÉn s·ªë xe:", record.plate);
      if (newPlate === null) return;

      const newBuilding = prompt("ƒê·ªãa ƒëi·ªÉm:", record.building);
      if (newBuilding === null) return;

      const newFloor = prompt("H·∫ßm/T·∫ßng:", record.floor);
      if (newFloor === null) return;

      const newSpot = prompt("√î tr·ªëng:", record.spot);
      if (newSpot === null) return;

      const newNote = prompt("Ghi ch√∫ (c√≥ th·ªÉ ƒë·ªÉ tr·ªëng):", record.note || "");
      if (newNote === null) return;

      const trimmedDateTime = newDateTime.trim();
      if (trimmedDateTime) {
        const dateObj = parseDateTime(trimmedDateTime);
        if (dateObj) {
          record.datetime = trimmedDateTime;
          record.timestamp = dateObj.getTime();
        }
      }

      const trimmedPlate = newPlate.trim();
      if (trimmedPlate) {
        record.plate = trimmedPlate;
        // n·∫øu plate m·ªõi ch∆∞a c√≥ trong dropdown th√¨ th√™m
        if (!customPlates.includes(trimmedPlate)) {
          customPlates.push(trimmedPlate);
          savePlates();
          updatePlateDropdown();
        }
      }

      const trimmedBuilding = newBuilding.trim();
      if (trimmedBuilding) {
        record.building = trimmedBuilding;
        if (!customLocations.includes(trimmedBuilding)) {
          customLocations.push(trimmedBuilding);
          saveLocations();
          updateLocationDropdown();
        }
      }

      record.floor = newFloor.trim() || record.floor;
      record.spot = newSpot.trim() || record.spot;
      record.note = newNote.trim();

      saveRecords();
      renderRecords();
    }

    // X√≥a record
    function deleteRecord(id) {
      if (!confirm("Xo√° l·∫ßn ƒë·ªó xe n√†y?")) return;
      records = records.filter(r => r.id !== id);
      saveRecords();
      renderRecords();
    }

    // Thi·∫øt l·∫≠p swipe cho 1 record
    function setupSwipe(row, content) {
      let startX = 0;
      let initialOffset = 0;
      let currentOffset = 0;
      let dragging = false;
      const maxLeft = -140; // 2 n√∫t * 70px

      const startDrag = (clientX) => {
        dragging = true;
        startX = clientX;
        initialOffset = currentOffset;
        content.style.transition = "none";
      };

      const moveDrag = (clientX) => {
        if (!dragging) return;
        const dx = clientX - startX;
        let newOffset = initialOffset + dx;
        if (newOffset < maxLeft) newOffset = maxLeft;
        if (newOffset > 0) newOffset = 0;
        currentOffset = newOffset;
        content.style.transform = `translateX(${newOffset}px)`;
      };

      const endDrag = () => {
        if (!dragging) return;
        dragging = false;
        content.style.transition = "transform 0.2s ease";
        // n·∫øu k√©o qu√° n·ª≠a => m·ªü full
        if (currentOffset < maxLeft / 2) {
          currentOffset = maxLeft;
        } else {
          currentOffset = 0;
        }
        content.style.transform = `translateX(${currentOffset}px)`;
      };

      // touch events
      row.addEventListener("touchstart", (e) => {
        if (e.touches.length > 1) return;
        startDrag(e.touches[0].clientX);
      });

      row.addEventListener("touchmove", (e) => {
        if (!dragging) return;
        moveDrag(e.touches[0].clientX);
      });

      row.addEventListener("touchend", () => {
        endDrag();
      });

      // mouse events (desktop)
      row.addEventListener("mousedown", (e) => {
        startDrag(e.clientX);

        const onMouseMove = (ev) => moveDrag(ev.clientX);
        const onMouseUp = () => {
          endDrag();
          document.removeEventListener("mousemove", onMouseMove);
          document.removeEventListener("mouseup", onMouseUp);
        };

        document.addEventListener("mousemove", onMouseMove);
        document.addEventListener("mouseup", onMouseUp);
      });

      // click v√†o n·ªôi dung s·∫Ω ƒë√≥ng swipe n·∫øu ƒëang m·ªü
      content.addEventListener("click", () => {
        if (currentOffset !== 0) {
          currentOffset = 0;
          content.style.transition = "transform 0.2s ease";
          content.style.transform = "translateX(0px)";
        }
      });
    }

    // Render danh s√°ch records
    function renderRecords() {
      const container = document.getElementById("recordsContainer");
      const emptyText = document.getElementById("emptyText");
      const searchInput = document.getElementById("searchInput");

      const searchValue = searchInput.value.toLowerCase().trim();

      container.innerHTML = "";

      let filtered = records;

      if (searchValue) {
        filtered = records.filter(r => {
          const combined = [
            r.plate,
            r.floor,
            r.spot,
            r.building,
            r.datetime,
            r.note
          ].join(" ").toLowerCase();
          return combined.includes(searchValue);
        });
      }

      if (filtered.length === 0) {
        emptyText.style.display = "block";
        return;
      }

      emptyText.style.display = "none";

      filtered.forEach(record => {
        const orderIndex = records.findIndex(r => r.id === record.id) + 1;

        const row = document.createElement("div");
        row.className = "record";

        const content = document.createElement("div");
        content.className = "record-content";

        // Header v·ªõi s·ªë th·ª© t·ª±
        const header = document.createElement("div");
        header.className = "record-header";

        const numberBadge = document.createElement("span");
        numberBadge.className = "record-number";
        numberBadge.textContent = `#${orderIndex}`;

        header.appendChild(numberBadge);

        // Bi·ªÉn s·ªë xe n·ªïi b·∫≠t
        const plate = document.createElement("div");
        plate.className = "record-plate";
        plate.textContent = `üöó ${record.plate}`;

        // V·ªã tr√≠ ƒë·ªó xe n·ªïi b·∫≠t
        const location = document.createElement("div");
        location.className = "record-location";
        if (record.spot) {
          location.textContent = `üìç ${record.floor} - √î ${record.spot}`;
        } else {
          location.textContent = `üìç ${record.floor}`;
        }

        // Chi ti·∫øt d·∫°ng b·∫£ng
        const details = document.createElement("div");
        details.className = "record-details";

        const addDetailRow = (label, value) => {
          const labelEl = document.createElement("div");
          labelEl.className = "record-label";
          labelEl.textContent = label;

          const valueEl = document.createElement("div");
          valueEl.className = "record-value";
          valueEl.textContent = value;

          details.appendChild(labelEl);
          details.appendChild(valueEl);
        };

        addDetailRow("üè¢ ƒê·ªãa ƒëi·ªÉm:", record.building);
        addDetailRow("üïê Th·ªùi gian:", record.datetime);

        // Ghi ch√∫ (n·∫øu c√≥)
        let noteEl = null;
        if (record.note) {
          noteEl = document.createElement("div");
          noteEl.className = "record-note";
          noteEl.textContent = `üìù ${record.note}`;
        }

        // N·ªôi dung card
        content.appendChild(header);
        content.appendChild(plate);
        content.appendChild(location);
        content.appendChild(details);
        if (noteEl) content.appendChild(noteEl);

        // N√∫t S·ª≠a / X√≥a ph√≠a sau (swipe actions)
        const swipeActions = document.createElement("div");
        swipeActions.className = "swipe-actions";

        const editBtn = document.createElement("div");
        editBtn.className = "swipe-btn swipe-edit";
        editBtn.textContent = "S·ª≠a";
        editBtn.onclick = (e) => {
          e.stopPropagation();
          editRecord(record.id);
        };

        const delBtn = document.createElement("div");
        delBtn.className = "swipe-btn swipe-delete";
        delBtn.textContent = "Xo√°";
        delBtn.onclick = (e) => {
          e.stopPropagation();
          deleteRecord(record.id);
        };

        swipeActions.appendChild(editBtn);
        swipeActions.appendChild(delBtn);

        row.appendChild(swipeActions);
        row.appendChild(content);

        // G·∫Øn h√†nh vi swipe
        setupSwipe(row, content);

        container.appendChild(row);
      });
    }

    // Event listener cho t√¨m ki·∫øm
    document.getElementById("searchInput").addEventListener("input", renderRecords);

    // Event listener cho dropdown ƒë·ªãa ƒëi·ªÉm
    document.getElementById("buildingInput").addEventListener("change", function(e) {
      const customInput = document.getElementById("buildingInputCustom");
      if (e.target.value === "other") {
        customInput.style.display = "block";
        customInput.focus();
      } else {
        customInput.style.display = "none";
        customInput.value = "";
      }
    });

    // Event listener cho dropdown bi·ªÉn s·ªë
    document.getElementById("plateInput").addEventListener("change", function(e) {
      const customInput = document.getElementById("plateInputCustom");
      if (e.target.value === "other") {
        customInput.style.display = "block";
        customInput.focus();
      } else {
        customInput.style.display = "none";
        customInput.value = "";
      }
    });

    // Auto format bi·ªÉn s·ªë xe cho √¥ nh·∫≠p m·ªõi
    document.getElementById("plateInputCustom").addEventListener("input", function(e) {
      let value = e.target.value.toUpperCase().replace(/[^0-9A-Z]/g, "");
      
      // N·∫øu c√≥ 3 k√Ω t·ª± tr·ªü l√™n v√† ch∆∞a c√≥ d·∫•u g·∫°ch ngang
      if (value.length >= 3 && !value.includes("-")) {
        let firstPart = value.slice(0, 3);
        let hasLetter = /[A-Z]/.test(firstPart);
        
        if (hasLetter) {
          // Th√™m d·∫•u g·∫°ch ngang sau 3 k√Ω t·ª± ƒë·∫ßu n·∫øu k√Ω t·ª± th·ª© 4 l√† s·ªë
          if (value.length > 3 && /[0-9]/.test(value[3])) {
            value = value.slice(0, 3) + "-" + value.slice(3);
          }
        }
      }
      
      // Gi·ªõi h·∫°n ƒë·ªô d√†i
      if (value.length > 15) {
        value = value.slice(0, 15);
      }
      
      e.target.value = value;
    });

    // Kh·ªüi t·∫°o
    document.addEventListener("DOMContentLoaded", loadRecords);
  </script>
</body>
</html>
